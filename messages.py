# import markups as m

follow_up_message = "üìù –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ —Å—É—Ç–æ–∫. " \
                    "–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–∏—à–∏—Ç–µ –∏—Ö –∑–¥–µ—Å—å."

question_pending_msg = "üïí –°–ø–∞—Å–∏–±–æ, –í–∞—à –≤–æ–ø—Ä–æ—Å –≤–∑—è—Ç –≤ —Ä–∞–±–æ—Ç—É.\n\n" + follow_up_message

your_option = "üñä –ü—Ä–µ–¥–ª–æ–∂–∏—Ç–µ —Å–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç"

unexpected_input_message = (
    "ü§î –ö–∞–∂–µ—Ç—Å—è, —è –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.\n\n"
    "üÜò –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –≤–∞–º —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–º–æ—â—å, "
    "–≤—ã –º–æ–∂–µ—Ç–µ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –ø–µ—Ä–µ–π—Ç–∏ –∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —Å –Ω–∞—à–∏–º —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º."
)


def start_message(user_data):
    name = user_data['first_name']
    msg = f"<b>üëã –î–æ–±—Ä—ã–π –¥–µ–Ω—å, {name}!</b>\n\n" \
          "–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ üôè\n" \
          "–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ —Ç–æ—á–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ <b>–ø–æ–ª—É—á–µ–Ω–∏–∏ –í–ù–ñ –≤ –í–µ–Ω–≥—Ä–∏–∏ üá≠üá∫</b>, " \
          "–ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —É—Å–∫–æ—Ä—è—Ç –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é!\n\n" \
          "<b>üöÄ –ü—Ä–∏—Å—Ç—É–ø–∏–º?</b>"
    return msg


def final_message(user_data):
    name = user_data['first_name']
    msg = f"üéâ {name}, –±–ª–∞–≥–æ–¥–∞—Ä–∏–º –∑–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã!\n\n{follow_up_message}"
    return msg


script_data = {
    1: {
        "text": "<b>üöÄ –ü—Ä–∏—Å—Ç—É–ø–∏–º?</b>",
        "buttons": [["yes"],
                    ["no_go_to_manager"]],
        "actions": {
            "yes": 2,
            "no_go_to_manager": -1,
            "go_to_manager": -1
        }
    },
    2: {
        "text": "<b>üåç –ï—Å—Ç—å –ª–∏ —É –í–∞—Å –∑–∞–≥—Ä–∞–Ω–ø–∞—Å–ø–æ—Ä—Ç, –¥–æ —Å—Ä–æ–∫–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è –∫–æ—Ç–æ—Ä–æ–≥–æ –±–æ–ª–µ–µ 2—Ö –ª–µ—Ç?</b>",
        "buttons": [["yes", "no"],
                    ["go_to_manager"]],
        "question_id": 1,
        "actions": {
            "yes": 3,
            "no": 3,
            "go_to_manager": 0
        }
    },
    3: {
        "text": "<b>üõÇ –ï—Å—Ç—å –ª–∏ —É –í–∞—Å –¥–µ–π—Å—Ç–≤—É—é—â–∞—è —à–µ–Ω–≥–µ–Ω—Å–∫–∞—è –≤–∏–∑–∞?</b>",
        "buttons": [["yes", "no"],
                    ["go_back"],
                    ["go_to_manager"]],
        "question_id": 2,
        "actions": {
            "yes": 4,
            "no": 5,
            "go_to_manager": 0,
            "go_back": 2
        }
    },
    4: {
        "text": "<b>‚è≥ –ö–∞–∫–æ–π —Å—Ä–æ–∫ –æ–∫–æ–Ω—á–∞–Ω–∏—è –≤–∞—à–µ–π –≤–∏–∑—ã?</b>\n<i>‚å® –ù–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –Ω–∏–∂–µ.</i>",
        "buttons": [["go_back"],
                    ["go_to_manager"]],
        "question_id": 3,
        "listen": 5,
        "actions": {
            "go_to_manager": 0,
            "go_back": 3
        }
    },
    5: {
        "text": "<b>üìç –í –∫–∞–∫–æ–π —Å—Ç—Ä–∞–Ω–µ –≤—ã —Å–µ–π—á–∞—Å –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å?</b>",
        "buttons": [["russia", "other"],
                    ["go_back"],
                    ["go_to_manager"]],
        "question_id": 4,

        "actions": {
            "russia": 0,
            "other": 6,
            "go_to_manager": 0,
            "go_back": 4
        }
    },
    6: {
        "text": "<b>üìç –í –∫–∞–∫–æ–π —Å—Ç—Ä–∞–Ω–µ –≤—ã —Å–µ–π—á–∞—Å –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å?</b>\n<i>‚å® –ù–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –Ω–∏–∂–µ.</i>",
        "buttons": [["go_back"],
                    ["go_to_manager"]],
        "question_id": 4,
        "listen": 0,
        "actions": {
            "go_to_manager": 0,
            "go_back": 5
        }
    },
    0: {
        "text_function": final_message,
        "question_id": 0,
        "listen": -2,
    },
    -1: {
        "text": follow_up_message,
        "listen": -2,
        "question_id": 0,
    },
    -2: {
        "text": question_pending_msg,
        "listen": -2,
        "question_id": 0,
    }
}


def generate_message_text(script_item, user_data=None):
    if "text_function" in script_item:
        # –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ–ª–∂–µ–Ω –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π
        return script_item["text_function"](user_data)
    else:
        # –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —É–∂–µ –∑–∞–¥–∞–Ω
        return script_item["text"]


# ======================GROUP CHAT MESSAGES=================================

send_to_all_question = "–í—ã —Ö–æ—Ç–∏—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º?"


def bulk_send_report_msg(all_users=None, successful_sends=0, blocked_users=0, success=False):
    if success:
        return f"üì¨ –†–∞—Å—Å—ã–ª–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!\n\n–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {len(all_users)}\n" \
               f"–£—Å–ø–µ—à–Ω–æ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ: {successful_sends}\n–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ: {blocked_users}"
    else:
        return "‚ùå –†–∞—Å—Å—ã–ª–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞."
